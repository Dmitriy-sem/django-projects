(this.webpackJsonptesthooks=this.webpackJsonptesthooks||[]).push([[0],{13:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),r=n(6),i=n.n(r),a=(n(13),n(7)),s=n(8),u=n(5),d=c.a.createContext(),l=n(0);var h=function(e){var t=e.todos,n=t.pk,c=t.title,r=t.is_done,i=Object(o.useContext)(d),a=i.removeTodo,s=i.toggleTodo,u="todo";return r&&(u+=" is_done"),Object(l.jsx)("li",{className:u,children:Object(l.jsxs)("label",{children:[Object(l.jsx)("input",{type:"checkbox",checked:r,onChange:function(){return s(n)}}),Object(l.jsx)("span",{children:c}),Object(l.jsx)("i",{className:"fas fa-trash",onClick:function(){return a(n)}})]})})};var f=function(){var e=Object(o.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(o.useState)(""),i=Object(u.a)(r,2),f=i[0],p=i[1];function j(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var c=n[o].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}return Object(o.useEffect)((function(){fetch("http://127.0.0.1:8000/api/task-list/").then((function(e){return e.json()})).then((function(e){return c(e)}))}),[]),Object(l.jsx)(d.Provider,{value:{removeTodo:function(e){fetch("http://127.0.0.1:8000/api/task-delete/".concat(e,"/"),{method:"DELETE",headers:{"Content-type":"application/json","X-CSRFToken":j("csrftoken")}}),c(n.filter((function(t){return t.pk!==e})))},toggleTodo:function(e){var t=JSON.stringify({is_done:function(){var t,o=Object(a.a)(n);try{for(o.s();!(t=o.n()).done;){var c=t.value;if(c.pk===e)return!c.is_done}}catch(r){o.e(r)}finally{o.f()}return!0}()});fetch("http://127.0.0.1:8000/api/task-update/".concat(e,"/"),{method:"PATCH",headers:{"Content-type":"application/json","X-CSRFToken":j("csrftoken")},body:t}),c(n.map((function(t){return t.pk===e&&(t.is_done=!t.is_done),t})))}},children:Object(l.jsxs)("div",{className:"container",children:[Object(l.jsx)("h1",{children:"Todo app"}),Object(l.jsxs)("div",{className:"input-field",children:[Object(l.jsx)("input",{type:"text",value:f,onChange:function(e){return p(e.target.value)},onKeyPress:function(e){if("Enter"===e.key){var t;try{t=n[n.length-1].pk+1}catch(e){t=1}var o={pk:t,title:f,is_done:!1};fetch("http://127.0.0.1:8000/api/task-create/",{method:"POST",headers:{"Content-type":"application/json","X-CSRFToken":j("csrftoken")},body:JSON.stringify(o)}),p(""),c([].concat(Object(s.a)(n),[o]))}}}),Object(l.jsx)("label",{children:"Todo name"})]}),Object(l.jsx)("ul",{children:n.map((function(e){return Object(l.jsx)(h,{todos:e},e.pk)}))})]})})};n(15),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(l.jsx)(f,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[17,1,2]]]);
//# sourceMappingURL=main.41d2417a.chunk.js.map